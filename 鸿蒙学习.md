# 鸿蒙学习

## 响应式数据

```
@State message: string = 'Hello World';
```

## 样式

### @Styles复用

1.不可传参

全局

```
@Styles function iptStyle(){
  .width(200)
  .height(100)
  .backgroundColor(Color.Yellow)
}

```

局部写法

```
@Styles iptStyle(){
  .width(200)
  .height(100)
  .backgroundColor(Color.Yellow)
}
```

### @Extend

1.可以传参

```
interface OptionType{
  border:number
}
@Extend(TextInput) function iptStyles(options:OptionType){
  .width(200)
  .height(100)
  .border({
    width:{bottom:options.border}
  })
  .backgroundColor(Color.Yellow)
}
```

```
build() {
    Column(){
      TextInput({placeholder:"请输入手机号"}).iptStyles({border:10})
      TextInput({placeholder:"请输入验证码"}).iptStyles({border:0})
    }
 }
```

### stateStyles样式多态

```
Text("获取验证码")
        .fontSize(16)
        .enabled(false) //禁用
        .stateStyles({
          normal:{ 
            .backgroundColor(Color.Red) //正常显示    禁用不显示此颜色
          },
          pressed:{
            .backgroundColor(Color.White) //按压显示   禁用不显示此颜色
          },
          disabled:{
            .backgroundColor('#ccc') //禁用显示此颜色
          },
          focused:{
            .backgroundColor('#eee') 
          }
        })
```

## 登录短信倒计时

```
1.准备声明式数据
2.content=获取验证码、time=60  timer=定时器 disabled是否禁用
3.绑定点击时间
4.事件处理
	4.1过滤 避免重复点击
	4.2立马-1 同步视图页面
	4.3间隔1秒-1 判断如果time<=1 先清空定时器 中止代码执行
	4.4发送服务器请求
```

```
@Entry
@Component
struct Index{
	@State content:string = '获取验证码'
	@State isEndabled:boolean = true
	private time:number = 10
	private imer:number = 0
	build(){
		Text(this.content)
			.fontSize(40)
			.fontColor(this.isEnabled ? Color.White:'#ccc')
			.borderRaduis(30)
			.padding(20)
			.onClick(()=>{
				this.isEnabled = false
				this.time--
				this.content = `剩余${this.time}s`
				this.timer = setInterval(()=>{
					if(this.time <=1 ){
						clearInterval(this.timer)
						this.content = '获取验证码'
						this.isEnabled = true
						this.time = 10 
						this.timer = 0
						return
					}
					this.time--
					this.content = `剩余${this.time}s`
					//发送网络请求
				},1000)
			})
	}
}
```



## 水平垂直居中

```
.width('100%')
.height('100%')
.justifyContent(FlexAlign.Center)
```



## 封装组件

### 普通组件

@Component 修饰

```
@Component
export default struct NavBar {
	@Prop title:string
	build(){
		Row(){
			Text('左').txtStyle
			Text(this.title)
			Text('右')
		}
	}
		.width('100%')
}
```

```
import NavBar from 'xxxxx'
struct Index{
	build(){
		Column(){
            NavBar({
                title:'京东商场'
            })
		}
	}
}
```

一传 二收 三使用

```
传递：组件名（{名字：数据,....}）
接受：@Prop 名称：类型
使用：this.名称
```

### 子改父

@Link使用

> 子组件可以修改父组件的属性值，用于子改父 将子组件接受的数据@Prop 改为@Link



### 多层级传递

@Provide @Consume进行使用

1.父组件@Provide定义数据

2.子组件或子孙组件 使用 @Consume进行数据接受并使用

